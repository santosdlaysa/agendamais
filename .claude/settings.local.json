{
  "permissions": {
    "allow": [
      "Bash(move package.json frontend/)",
      "Bash(move package-lock.json frontend/)",
      "Bash(move vite.config.js frontend/)",
      "Bash(move:*)",
      "Bash(move index.html frontend/)",
      "Bash(move public frontend/)",
      "Bash(npm install)",
      "Bash(npm run dev:*)",
      "Bash(npm test:*)",
      "Read(C:\\Users\\ldsantos\\WebstormProjects\\agendamais-backend/**)",
      "Read(C:\\Users\\ldsantos\\WebstormProjects\\agendamais-backend/**)",
      "WebFetch(domain:localhost)",
      "Bash(npm run build:*)",
      "Bash(npm install:*)",
      "Bash(if not exist public mkdir public)",
      "Bash(npx electron-builder:*)",
      "Bash(tasklist)",
      "Bash(findstr:*)",
      "Bash(dir:*)",
      "Bash(test:*)",
      "Bash(timeout:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(curl:*)",
      "Bash(node db-query.js:*)",
      "Bash(powershell -Command:*)",
      "Bash(python -c \"\nimport os\npath = r''src/services/email_service.py''\ncontent = ''''''import resend\nfrom flask import render_template_string\nimport os\n\n# Configurar API key do Resend\nresend.api_key = os.getenv\\(\"\"RESEND_API_KEY\"\"\\)\n\n# Email remetente \\(deve ser um dominio verificado no Resend\\)\nFROM_EMAIL = os.getenv\\(\"\"RESEND_FROM_EMAIL\"\", \"\"Agenda+ <noreply@agendamais.com>\"\"\\)\n\n# Template HTML para email de verificacao\nVERIFICATION_EMAIL_TEMPLATE = \"\"\"\"\"\"\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"\"UTF-8\"\">\n    <style>\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n        .header { background-color: #4F46E5; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }\n        .content { background-color: #f9fafb; padding: 30px; border: 1px solid #e5e7eb; }\n        .button { display: inline-block; background-color: #4F46E5; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }\n        .footer { text-align: center; padding: 20px; color: #6b7280; font-size: 12px; }\n    </style>\n</head>\n<body>\n    <div class=\"\"container\"\">\n        <div class=\"\"header\"\">\n            <h1>Agenda+</h1>\n        </div>\n        <div class=\"\"content\"\">\n            <h2>Confirme seu email</h2>\n            <p>Ola <strong>{{ name }}</strong>,</p>\n            <p>Obrigado por se cadastrar no Agenda+! Para completar seu cadastro, por favor confirme seu email clicando no botao abaixo:</p>\n            <p style=\"\"text-align: center;\"\">\n                <a href=\"\"{{ verification_url }}\"\" class=\"\"button\"\">Confirmar Email</a>\n            </p>\n            <p>Ou copie e cole este link no seu navegador:</p>\n            <p style=\"\"word-break: break-all; color: #4F46E5;\"\">{{ verification_url }}</p>\n            <p><strong>Este link expira em 24 horas.</strong></p>\n            <p>Se voce nao criou uma conta no Agenda+, ignore este email.</p>\n        </div>\n        <div class=\"\"footer\"\">\n            <p>Agenda+ - Sistema de Agendamentos</p>\n            <p>Este e um email automatico, nao responda.</p>\n        </div>\n    </div>\n</body>\n</html>\n\"\"\"\"\"\"\n\n\ndef send_email\\(subject, recipient, html_body, text_body=None\\):\n    try:\n        params = {\n            \"\"from\"\": FROM_EMAIL,\n            \"\"to\"\": [recipient],\n            \"\"subject\"\": subject,\n            \"\"html\"\": html_body,\n        }\n        if text_body:\n            params[\"\"text\"\"] = text_body\n        response = resend.Emails.send\\(params\\)\n        print\\(f\"\"Email enviado com sucesso: {response}\"\"\\)\n        return True, \"\"Email enviado com sucesso\"\"\n    except Exception as e:\n        print\\(f\"\"Erro ao enviar email: {str\\(e\\)}\"\"\\)\n        return False, str\\(e\\)\n\n\ndef send_verification_email\\(user, verification_url\\):\n    from datetime import datetime\n    html_body = render_template_string\\(\n        VERIFICATION_EMAIL_TEMPLATE,\n        name=user.name,\n        verification_url=verification_url,\n        year=datetime.now\\(\\).year\n    \\)\n    text_body = f\"\"Ola {user.name}, para confirmar seu email, acesse: {verification_url}\"\"\n    return send_email\\(\n        subject=\"\"Confirme seu email - Agenda+\"\",\n        recipient=user.email,\n        html_body=html_body,\n        text_body=text_body\n    \\)\n\n\nPROFESSIONAL_INVITE_TEMPLATE = \"\"\"\"\"\"\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"\"UTF-8\"\">\n    <style>\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n        .header { background-color: #4F46E5; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }\n        .content { background-color: #f9fafb; padding: 30px; border: 1px solid #e5e7eb; }\n        .button { display: inline-block; background-color: #4F46E5; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }\n        .footer { text-align: center; padding: 20px; color: #6b7280; font-size: 12px; }\n        .highlight { background-color: #e0e7ff; padding: 15px; border-radius: 6px; margin: 15px 0; }\n    </style>\n</head>\n<body>\n    <div class=\"\"container\"\">\n        <div class=\"\"header\"\">\n            <h1>Agenda+</h1>\n            <p>Portal do Profissional</p>\n        </div>\n        <div class=\"\"content\"\">\n            <h2>Voce foi convidado!</h2>\n            <p>Ola <strong>{{ professional_name }}</strong>,</p>\n            <p>Voce recebeu um convite para acessar o <strong>Portal do Profissional</strong> do Agenda+.</p>\n            <div class=\"\"highlight\"\">\n                <p><strong>Com o portal voce podera:</strong></p>\n                <ul>\n                    <li>Visualizar sua agenda de atendimentos</li>\n                    <li>Gerenciar seus horarios de trabalho</li>\n                    <li>Acompanhar suas estatisticas</li>\n                    <li>Ver historico de clientes atendidos</li>\n                </ul>\n            </div>\n            <p>Para ativar sua conta, clique no botao abaixo e defina sua senha:</p>\n            <p style=\"\"text-align: center;\"\">\n                <a href=\"\"{{ activation_url }}\"\" class=\"\"button\"\">Ativar Minha Conta</a>\n            </p>\n            <p>Ou copie e cole este link no seu navegador:</p>\n            <p style=\"\"word-break: break-all; color: #4F46E5;\"\">{{ activation_url }}</p>\n            <p><strong>Este link expira em 48 horas.</strong></p>\n        </div>\n        <div class=\"\"footer\"\">\n            <p>Agenda+ - Sistema de Agendamentos</p>\n            <p>Este e um email automatico, nao responda.</p>\n        </div>\n    </div>\n</body>\n</html>\n\"\"\"\"\"\"\n\n\nPROFESSIONAL_RESET_TEMPLATE = \"\"\"\"\"\"\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"\"UTF-8\"\">\n    <style>\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n        .header { background-color: #4F46E5; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }\n        .content { background-color: #f9fafb; padding: 30px; border: 1px solid #e5e7eb; }\n        .button { display: inline-block; background-color: #4F46E5; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }\n        .footer { text-align: center; padding: 20px; color: #6b7280; font-size: 12px; }\n        .warning { background-color: #fef3c7; padding: 15px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #f59e0b; }\n    </style>\n</head>\n<body>\n    <div class=\"\"container\"\">\n        <div class=\"\"header\"\">\n            <h1>Agenda+</h1>\n            <p>Portal do Profissional</p>\n        </div>\n        <div class=\"\"content\"\">\n            <h2>Recuperacao de Senha</h2>\n            <p>Ola <strong>{{ professional_name }}</strong>,</p>\n            <p>Recebemos uma solicitacao para redefinir a senha da sua conta no Portal do Profissional.</p>\n            <p>Clique no botao abaixo para criar uma nova senha:</p>\n            <p style=\"\"text-align: center;\"\">\n                <a href=\"\"{{ reset_url }}\"\" class=\"\"button\"\">Redefinir Senha</a>\n            </p>\n            <p>Ou copie e cole este link no seu navegador:</p>\n            <p style=\"\"word-break: break-all; color: #4F46E5;\"\">{{ reset_url }}</p>\n            <div class=\"\"warning\"\">\n                <p><strong>Atencao:</strong> Este link expira em 1 hora.</p>\n                <p>Se voce nao solicitou a recuperacao de senha, ignore este email.</p>\n            </div>\n        </div>\n        <div class=\"\"footer\"\">\n            <p>Agenda+ - Sistema de Agendamentos</p>\n            <p>Este e um email automatico, nao responda.</p>\n        </div>\n    </div>\n</body>\n</html>\n\"\"\"\"\"\"\n\n\ndef send_professional_invite_email\\(email, professional_name, activation_url\\):\n    from datetime import datetime\n    html_body = render_template_string\\(\n        PROFESSIONAL_INVITE_TEMPLATE,\n        professional_name=professional_name,\n        activation_url=activation_url,\n        year=datetime.now\\(\\).year\n    \\)\n    text_body = f\"\"Ola {professional_name}, voce foi convidado para o Portal do Profissional. Acesse: {activation_url}\"\"\n    return send_email\\(\n        subject=\"\"Voce foi convidado para o Portal do Profissional - Agenda+\"\",\n        recipient=email,\n        html_body=html_body,\n        text_body=text_body\n    \\)\n\n\ndef send_professional_reset_email\\(email, professional_name, reset_url\\):\n    from datetime import datetime\n    html_body = render_template_string\\(\n        PROFESSIONAL_RESET_TEMPLATE,\n        professional_name=professional_name,\n        reset_url=reset_url,\n        year=datetime.now\\(\\).year\n    \\)\n    text_body = f\"\"Ola {professional_name}, para redefinir sua senha, acesse: {reset_url}\"\"\n    return send_email\\(\n        subject=\"\"Recuperacao de Senha - Portal do Profissional - Agenda+\"\",\n        recipient=email,\n        html_body=html_body,\n        text_body=text_body\n    \\)\n''''''\nwith open\\(path, ''w'', encoding=''utf-8''\\) as f:\n    f.write\\(content\\)\nprint\\(''OK''\\)\n\")",
      "Bash(pip install:*)",
      "Bash(python -m pip install:*)",
      "Bash(py -m pip install:*)"
    ],
    "deny": [],
    "ask": []
  }
}
